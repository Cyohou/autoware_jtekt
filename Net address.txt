这套算法里，k_j/k_d是给轨迹规划器的代价权重，不是直接“左/右方向指令”。
轨迹是实时循环生成并实时追踪的：每次规划回调生成一条“当前最优轨迹”；一个弯道过程中会连续生成很多条，不是“先整圈生成再追踪”。
你看到source=human说明干涉被识别到了；memory到阈值后出现RL agent update successfully说明RL更新确实执行了。
你当前代码里，人工映射是k_d=0固定，只改k_j和target_speed，见rl_online_rl.py (line 429)。
所以“速度偏好”能明显更新（你实测也验证了），但“轨迹偏好”常被稀释。
轨迹偏好不明显的核心原因不是RL没更新，而是规划链路里参数不总是被用到。
具体是：只有polyplan_trigger=True时才走poly_trajectory(..., planner_param, speed_cost)，见globalplanner.py (line 40)。
非poly时会走过渡/缓存轨迹，见globalplanner.py (line 45)，这会让新k_j/k_d对实际轨迹影响变弱。
你说“可以更新速度偏好，更新不了轨迹偏好”，在当前代码行为上是准确的工程结论。
我们还确认过：k_j/k_d会变化，但“参数变化 ≠ 轨迹一定明显左靠/右靠”，因为还受触发区、过渡轨迹、当前状态和其他代价项共同影响。
