代码调校
聚焦定位链路：

ndt_scan_matcher_core.cpp 调整 yaw 补偿、姿态/速度处理；
gyro_odometer 中 GNSS twist passthrough 加入速度模长投影、协方差处理；
EKF (pose_twist_fusion_filter) launch 参数重新匹配 yaw 偏差（初期设 2.2689 rad ≈ 130°）。
指导如何调用 /localization/pose_twist_fusion_filter/trigger_node 服务复位 EKF（Galactic 环境下 ros2 service call ... SetBool {data: true}）。
多轮尝试（含 yaw 偏差、协方差 floor、twist smoothing 等），用户多次生成 CSV，我们逐个分析，提供均值/P90/P99 误差、 yaw diff、速度差等统计，并给出改进建议。
问题诊断深化

早期结果：twist 速度与 GNSS 接近，但 pose yaw 仍大幅偏移，定位位置误差 4–5 m。
分析到 pose yaw 未引用新的 GNSS 基准；检查 EKF launch、pose initializer、ndt passthrough。建议 EKF yaw correction 设为 0，并在 ndt_scan_matcher 也设 0。
修改后：位置误差降到 ~2.4 m，但 yaw 仍不对。进一步分析 gnss pose passthrough 源码，发现利用 GNSS 速度重建 yaw 时漏了把速度向量旋到 map 坐标系，导致 heading 始终偏 90°～180°。
关键修复
我们在 ndt_scan_matcher_core.cpp 中将 vel_flu_map 用 q_corrected 旋至 map 坐标系后再算 heading = atan2(vel_map.y(), vel_map.x())，消除车体/地图坐标系混用；并提醒重启后再复位 EKF。

最新数据解读
用户生成最新 CSV：

速度误差继续优秀（平均 −0.005 km/h，|Δyaw|>5° 仅 2.3 %）。
但 pose yaw 统计仍显示 ±180° 摆动，说明 EKF 还未接受新的姿态量测（旧状态或其他门限生效）。给出建议：检查 /localization/pose_estimator/pose 是否真的带 GNSS yaw，复位 EKF 后重采样；必要时调整 EKF 的 Mahalanobis gate / 协方差，确保 yaw 更新。
